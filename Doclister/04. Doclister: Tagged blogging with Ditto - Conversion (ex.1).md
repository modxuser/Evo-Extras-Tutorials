## 04. Doclister: Tagged blogging with Ditto - Conversion (ex.1)

The aim of this tutorial is to convert the original Ditto tutorial (Tagged blogging with Ditto (ex.1)) into a working solution for Doclister.

This tutorial uses elements found in some of my other Doclister tutorials, such as calls, pagination etc.

The code will not be broken down this time as sufficient information can be found in other tutorials describing what the elements in the calls do.

This tutorial consists of multiple parts / sections:

1. Create a tag section consisting of documents representing categories used in a pre-defined template variable
2. Create a blog section with child documents and attach the tag template variable
3. Display category tags in 2 different places - Blog overview page summary & Blog page content
4. Filter content in categories found in the tag section


This tutorial was developed in Evo 1.4.14, the templates used are from the original "Evo" default install which use Bootsrap.

For this tutorial you must have the following snippets installed:

1. Doclister
2. tagLinks

<details>
 <summary><strong>IMPORTANT NOTE:</strong> TagSaver Plugin</summary>
 <p>As of writing this tutorial I wasn't able to get the TagSaver plugin working, as such, it won't be used in this tutorial.</p>
 <p><strong>BUT:</strong> if you want to, you can install the plugin and the database tables using the instructions found in the tutorial.</p>
 <p>This way if the TagSaver method can (eventually) be used, you won't have to go back and re-save all pages that use tags, as they will have already been saved into the TagSaver database tables.</p>
 <p>It could save you time at a later stage, that is, if and when I get help to complete the Tagsaver tutorial.</p>
</details>

# Section 1: Getting Started

As this tutorial is about **category tagging**, we need to pre-define what categories we want to use in the website.

For this specific tutorial, we will be using colours.

To note is: we can add categories at a later stage, but if you wish to add these categories to older posts, you will have to revisit the post / page and select it/them and re-save the document.

### Step 1 - Create A Category Template Variable:

There is no difference to creating any other TV.

The "input option values" used in this tutorial are as follows:

```
Aqua||Black||Blue||Fushsia||Gray||Green||Lime||Maroon||Navy||Olive||Purple||Red||Silver||Teal||White||Yellow
```

You can simply copy and paste the above values into your own TV. The following settings are for this tutorial only, you can name the TV as you wish, you just need to be sure to refer to the right TV name later.

**TV Settings**

- TV Name: **myTags**
- Input Type: **Check Box**
- Widget: **Delimited List**
    - Widget Delimiter: **a comma**

You TV should basically look like the following image:

![tag-tv](https://user-images.githubusercontent.com/1859868/113714392-a208d900-96e8-11eb-9710-3c2f472bb46f.png)

In the image above, you can see that "Existing Category" has the name "Tagging" - to ensure no confusion, this is the Evo Admin panel category, it has nothing to do with the category tagging.

It is solely used in the Evo Admin Panel to keep things clean and sorted - the control panel "Tagging" category will be seen a lot in this tutorial, so please don't get confused.

At the bottom of the image you can see that this TV (template variable) has already been attached to the "BlogPost" template - this will be explained shortly.

Now that we have our categories we can set-up all of the category landing pages.

### Step 2 - Create Category Landing Pages:

The landing pages are created no different to any other pages.

**Create A Parent Folder**

First of all, create a parent / top level document and make it a folder, use the following settings:

![mytags-page](https://user-images.githubusercontent.com/1859868/113717458-ecd82000-96eb-11eb-85d7-d065ce9271d3.jpg)

You can add whatever you want to the content area of this page / document or simply re-direct it to the first child document.

For testing purposes, I suggest you add the following Doclister call to the content area:

```
<h1>[*longtitle*]</h1>
[[DocLister?  
&parents=`[*id*]` 
&ownerTPL=`@CODE:<ul class="list-group list-unstyled">[+dl.wrap+]</ul>` 
&tpl=`@CODE:<li><a class="list-group-item list-group-item-action" href="[+url+]">[+longtitle+]</a></li>` 
&orderBy=`menuindex ASC` 
&addWhereList=`hidemenu=1 AND published=1`
]]
```

**Side note:** The classes used for the `ul` & `a` elements can be found in the Bootstrap CSS file that is attached to the default template.

The call will simply list all of the child pages in the parents content area when viewed in a browser. An example can be seen here:

![mytags](https://user-images.githubusercontent.com/1859868/113720499-fdd66080-96ee-11eb-823c-d1e4e0ab9b6b.png)

**Create The Landing Pages**

Before we create the category landing pages, we need to create a page specific template for these pages only.

As this tutorial is based on the sample website that comes when you install Evo, we need to use the template that is used for the sample site.

1. Go to your templates and click on the link for: **EVO startup - Bootstrap(4)** > 1.0 Sample template in Bootstrap.

   You should now have something like the following image in front of you:

   ![evo-startup-bootstrap](https://user-images.githubusercontent.com/1859868/113727012-0893f400-96f5-11eb-8807-2617bcde27a6.png)

2. In the top right hand corner you have the options to: **Save**, **Duplicate**, **Delete** or **Cancel**.

3. Click "**Duplicate**" and confirm the pop-up with "**OK**".

4. Now rename the template to **Tags** (Template Name) and save it.

   You should now have something like the following image in front of you:

   ![tags-tpl](https://user-images.githubusercontent.com/1859868/113728805-b05df180-96f6-11eb-972f-c1c75ee0b1f7.png)

5. In the Template code area, find the following code:

   ```
   <h1>[*#longtitle*]</h1>
   [*#content*]
   
   [[if? &is=`[*parent*]:=:2` &then=`@TPL:Comments`]]
   ```

   You should now have something like the following in front of you:

   ![template code](https://user-images.githubusercontent.com/1859868/113728886-c66bb200-96f6-11eb-83a6-ab3fece8af83.png)

6. Remove the code from point 5 above and replace it with the following Doclister call:

   ```
   <h1>Tag: [*longtitle*] (Total of: [+list.count+])</h1>
   <br>
   [!Doclister? 
   &id=`list` 
   &parents=`50` 
   &showParent=`0` 
   &orderBy=`id DESC` 
   &ownerTPL=`@CODE:<ul class="list-group list-unstyled">[+dl.wrap+]</ul>` 
   &tpl=`@CODE:<li><a class="list-group-item list-group-item-action" href="[+url+]">[+pagetitle+]</a></li>` 
   &noneWrapOuter=`0` 
   &noneTPL=`@CODE: <strong>Sorry, there are no documents using the tag: [*longtitle*].</strong>` 
   &display=`2` 
   &addWhereList=`hidemenu=1 AND published=1` 
   &filters=`tv:myTags:like:[*longtitle*]` 
   &paginate=`pages` 
   &PrevNextAlwaysShow=`1` 
   &pageAdjacents=`2` 
   &TplWrapPaginate=`@CODE:<nav><ul id="pagination" class="pagination">[+wrap+]</ul></nav>` 
   &TplFirstP=`@CODE:<li class="page-item"><a class="page-link" href="[+link+]" title="First">&laquo;</a></li>` 
   &TplFirstI=`@CODE:<li class="page-item disabled"><span class="page-link" title="First">&laquo;</span></li>` 
   &TplPrevP=`@CODE:<li class="page-item"><a class="page-link" href="[+link+]" title="Previous">&lsaquo;</a></li>` 
   &TplPrevI=`@CODE:<li class="page-item disabled"><span class="page-link" title="Previous">&lsaquo;</span></li>` 
   &TplNextP=`@CODE:<li class="page-item"><a class="page-link" href="[+link+]" title="Next">&rsaquo;</a></li>` 
   &TplNextI=`@CODE:<li class="page-item disabled"><span class="page-link" title="Next">&rsaquo;</span></li>` 
   &TplLastP=`@CODE:<li class="page-item"><a class="page-link" href="[+link+]" title="Last">&raquo;</a></li>` 
   &TplLastI=`@CODE:<li class="page-item disabled"><span class="page-link" title="Last">&raquo;</span></li>` 
   &TplPage=`@CODE:<li class="page-item"><a class="page-link" href="[+link+]" title="[+num+]">[+num+]</a></li>`  
   &TplCurrentPage=`@CODE:<li class="page-item active"><span class="page-link" title="[+num+]">[+num+]</span></li>`  
   &TplDotsPage=`@CODE:<li>...</li>`
   !]
   <p class="center">Viewing <strong>[+list.from+]</strong> - <strong>[+list.to+]</strong> of <strong>[+list.count+]</strong> for <em>[*longtitle*]</em> | Page <strong>[+list.current+]</strong> of <strong>[+list.totalPages+]</strong></p>
   [+list.pages+]
   ```
   
   All of the classes are from Boostrap.

7. Now that our template is ready to be used, we can start creating pages for our categories.
